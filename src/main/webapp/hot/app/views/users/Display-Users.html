<page-title ng-if="layoutOptions.pageTitles" title="Manage Users" description=""></page-title>
<div class="" style="margin-top: -25px; margin-bottom: -15px;">
    <ol class="breadcrumb bc-1"  xe-breadcrumb>
        <li> <a href="index.html#/app/dashboard"><i class="fa-home"></i>Dashboard</a> </li>
        <li> <a href="">Users</a> </li>
        <li class="active"> <strong>Display User</strong> </li>
    </ol>
</div>
<style>
    body {
        width: 100%;
    }
    .clickableRow {
        cursor: pointer;
    }
    p, textarea {
        font-variant: small-caps !important;
        text-rendering: auto;
    }

    table {
        padding: 0px;

    }
    .modal-backdrop {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        bottom: -1000px;
        background-color: #000;
    }

</style>

<div class="row">
<div class="col-sm-12">
<div class="panel panel-default">

<!-- Custom column filtering -->
<div class="panel panel-default" ng-controller="viewAllUserCtrl" ng-cloak >


    <!--panel started here-->
    <div class="panel-heading">
        <h3 class="panel-title"></h3>

        <!--<div style="margin-top: -10px;">
        <input style="margin-left: 25px;" type="button" value="Show All" class="btn btn-primary"
               ng-class="{actives : activeMenu === 'All'}" ng-click="activeMenu = 'All'"/>
        <input type="button" value="Active" class="btn btn-primary"
               ng-class="{actives : activeMenu === 'Active'}" ng-click="activeMenu = 'Active'"/>
        <input type="button" value="Inactive" class="btn btn-primary"
               ng-class="{actives : activeMenu === 'Inactive'}" ng-click="activeMenu = 'Inactive'"/>
        </div>

-->
        <!--<div class="panel-options">
            <a href="" data-toggle="panel">
                <span class="collapse-icon">&ndash;</span>
                <span class="expand-icon">+</span>
            </a>
            <a href="" data-toggle="remove">
                &times;
            </a>
        </div>-->


        <a ui-sref="app.users-Create-User"><input style="float: right; margin-top: -5px;" class="btn btn-info btn-icon"
                                            type="button" value="Create User"/>
        </a>

    </div>
    <div class="panel-body">

        <table  ng-table="usersTable" show-filter="true" class="table table-striped table-bordered">

            <tr ng-repeat="user in data">
                 <td data-title="'First Name'" sortable="'firstName'" filter="{ 'firstName': 'text' }">
                {{user.firstName}}</td>
                <td data-title="'Last Name'" sortable="'lastName'" filter="{ 'lastName': 'text' }">
                {{user.lastName}}</td>
                <td data-title="'User Name'" sortable="'userName'" filter="{ 'userName': 'text' }">
                {{user.userName}}</td>
                <!--<td data-title="'Email-Id'" sortable="'emailId'" filter="{ 'emailId': 'text' }">
                {{user.emailId}}</td>
                <td data-title="'Contact No.'" sortable="'contactNumber'" filter="{ 'contactNumber': 'text' }">
                {{user.contactNumber}}</td>-->
                <td data-title="'Role'" sortable="'role'" filter="{ 'role': 'text' }">
                {{user.role}}</td>
                <td data-title="'Status'" sortable="'enabled'" filter="{ 'enabled': 'select' }" filter-data="[{id: true, title: 'Active'}, { id: false, title: 'Inactive'}]" >
                    {{user.enabled}}</td>


                <td data-title="'Actions'">
                     <div class="btn-group" dropdown>
                    <button type="button" class="btn btn-gray dropdown-toggle" style="font-size: 11px;">
                        Action <span class="caret"></span>
                    </button>

                    <ul class="dropdown-menu dropdown-gray" role="menu" style="font-size: 11px;">
                        <li>
                            <a href="" ng-click="openAjaxModal('modal-2','user/'+user.id)" class="">Details</a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="" ng-click="openAjaxModal('modal-5', 'user/'+user.id);" class="">Edit</a>
                        </li>

                        <li class="divider"></li>

                        <li ng-show="user.enabled==true">
                          <a href="" ng-click="openAjaxModal('modal-1','user/'+user.id)" class="">Disable</a>
                        </li>


                        <li ng-show="user.enabled==false">
                            <a href="" ng-click="openAjaxModal('modal-1','user/'+user.id)" class="">Enable</a>
                        </li>

                        <!--<li class="divider"></li>
                        <li>
                            <a href="" ng-click="openModal('modal-3')" class="">Delete</a>
                        </li>-->
                        <li class="divider"></li>
                        <li>
                            <a href="" ng-click="openAjaxModal('modal-4','user/'+user.id)" class="">Reset Password</a>
                        </li>

                    </ul>
                 </div>
                </td>

            </tr>

        </table>

    </div>
</div>
</div>
</div>
</div>







<script type="text/ng-template" id="modal-1">

    <div class="modal-header">
        <button type="button" class="close" ng-click="currentModal.close();" aria-hidden="true">&times;</button>
        <h4 class="modal-title" ng-show="responseData.enabled==true">Disable User</h4>
        <h4 class="modal-title" ng-show="responseData.enabled==false">Enable User</h4>
    </div>

    <div class="modal-body">

        <h4 ng-show="responseData.enabled==true">Are you sure you want to disable this user: {{responseData.firstName}}?</h4>
        <h4 ng-show="responseData.enabled==false">Are you sure you want to enable this user: {{responseData.firstName}}?</h4>
    </div>
            <br/>

    <div class="modal-footer">

        <button type="button" class="btn btn-info" ng-click="enableDisableUser(responseData.id,responseData.enabled);">Yes</button>
        <button type="button" class="btn btn-red" ng-click="currentModal.close();">No</button>
    </div>

</script>







<script type="text/ng-template" id="modal-4">

    <div class="modal-header">
        <button type="button" class="close" ng-click="currentModal.close();" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Reset Password</h4>
    </div>

    <div class="modal-body">

        <h4>Are you sure you want to Reset password for this user?</h4>
    </div>
    <br/>

    <div class="modal-footer">

        <button type="button" class="btn btn-info" ng-click="resetUserPassword(responseData.id);">Yes</button>
        <button type="button" class="btn btn-red" ng-click="currentModal.close();">No</button>
    </div>

</script>



<script type="text/ng-template" id="modal-2">

    <div class="modal-header">
        <button type="button" class="close" ng-click="currentModal.close();" aria-hidden="true">&times;</button>
        <h4 class="modal-title">{{responseData.firstName}}'s Details</h4>
    </div>

    <div class="modal-body">
        <table class="table responsive">
            <thead>
            <tr>

                <th>User Name</th>
                <th>{{responseData.userName}}</th>
            </tr>
            </thead>

            <tbody>
            <tr>

                <td>First Name</td>
                <td>{{responseData.firstName}}</td>
            </tr>

            <tr>

                <td>Last Name</td>
                <td>{{responseData.lastName}}</td>
            </tr>

            <tr>

                <td>Email-Id</td>
                <td>{{responseData.emailId}}</td>
            </tr>

            <tr>

                <td>Contact No.</td>
                <td>{{responseData.contactNumber}}</td>
            </tr>

           <!-- <tr>
                <td>Alternate Contact</td>
                <td>{{responseData.contactNumber}}</td>
            </tr>-->

            <tr>

                <td>City</td>
                <td>{{responseData.city}}</td>
            </tr>

            <tr>

                <td>Role</td>
                <td>{{responseData.role}}</td>
            </tr>





            </tbody>
        </table>

        <div ng-if="responseData.role=='TechnicalScreener'"
             ng-include src="'app/views/users/tsSkillsDetails_tpl.html'"></div>
    </div>
    <br/>

    <div class="modal-footer">
        <button type="button" class="btn btn-white" ng-click="currentModal.close();">Close</button>
        <!--  <button type="button" class="btn btn-info" ng-click="currentModal.dismiss();">Save changes</button>-->
    </div>

</script>




<script type="text/ng-template" id="modal-5">
    <div class="modal-header">
        <button type="button" class="close" ng-click="currentModal.close();" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Edit {{responseDataCopy.firstName}}'s Details</h4>
    </div>

    <form ng-submit="updateUser();" name="editUser" role="form" class="form-horizontal" >
    <div class="modal-body">

        <div class="row">
            <div class="col-md-6">

                <div class="form-group">
                    <label for="field-1" class="control-label">First Name</label>

                    <input type="text" required ng-model="responseData.firstName" class="form-control" placeholder="First Name">
                </div>

            </div>

            <div class="col-md-6">

                <div class="form-group">
                    <label for="field-2" class="control-label">Last Name</label>

                    <input type="text" required class="form-control" ng-model="responseData.lastName"  placeholder="Last Name">
                </div>

            </div>
        </div>


        <div class="row">
            <div class="col-md-6">

                <div class="form-group">
                    <label for="field-1" class="control-label">User Name</label>

                    <input type="text" ng-model="responseData.userName" readonly class="form-control" placeholder="First Name">
                </div>

            </div>

            <div class="col-md-6">

                <div class="form-group">
                    <label for="field-2" class="control-label">Email-Id</label>

                    <input type="text" class="form-control" readonly ng-model="responseData.emailId"  placeholder="Last Name">
                </div>

            </div>
        </div>

        <div class="row">
            <div class="col-md-6">

                <div class="form-group">
                    <label for="field-1" class="control-label">Contact No.</label>

                    <input type="text" readonly ng-model="responseData.contactNumber" class="form-control" placeholder="Your Primary Contact number">
                </div>

            </div>

            <div class="col-md-6">

                <div class="form-group">
                    <label for="field-2" class="control-label">Alternate Contact</label>

                    <input type="text" class="form-control"  placeholder="Alternate contact">
                </div>

            </div>
        </div>
        <div class="row">
            <div ng-if="responseData.role=='TechnicalScreener'" ng-include src="'app/views/users/tsSkillsEditView_tpl.html'"></div>
        </div>
        <div class="row">
            <div class="col-md-6">

                <div class="form-group">
                    <label for="field-3" class="control-label">Address 1</label>

                    <textarea style="resize: none;" rows="4" type="text" ng-model="responseData.addressOne" class="form-control" placeholder="Street Address, P.O.Box, Company Name, C/o"></textarea>
                </div>

            </div>

            <div class="col-md-6">

                <div class="form-group">
                    <label for="field-3" class="control-label">Address 2</label>

                    <textarea rows="4" style="resize: none;"  type="text" ng-model="responseData.addressTwo" class="form-control" placeholder="Apartment, Suit, Unit, Building, Floor, etc"></textarea>
                </div>

            </div>
        </div>


        <div class="row">
            <div class="col-md-6">

                <div class="form-group">
                    <label for="field-4" class="control-label">Zip Code</label>

                    <input type="text" ng-model="responseData.zipCode" maxlength="6" class="form-control" id="field-4" placeholder="123456">
                </div>

            </div>

            <div class="col-md-6">

                <div class="form-group">
                    <label for="field-5" class="control-label">City</label>

                    <input type="text" ng-model="responseData.city" class="form-control" id="field-5" placeholder="City">
                </div>

            </div>
            </div>



            <div class="row">
            <div class="col-md-6">

                <div class="form-group">
                    <label for="field-6" class="control-label">State</label>

                    <input type="text" ng-model="responseData.state" class="form-control" id="field-6" placeholder="State">
                </div>

            </div>

            <div class="col-md-6">

                <div class="form-group">
                    <label for="field-6" class="control-label">Country</label>

                    <input type="text" ng-model="responseData.country" class="form-control" id="field-6" placeholder="Country">
                </div>

            </div>



        </div>
   </div>

    <div class="modal-footer">

      <!--  <button type="button" class="btn btn-info" ng-click="currentModal.dismiss();">Save changes</button>-->
        <input type="submit" class="btn btn-info" value="Save changes">
        <input type="button" class="btn btn-red" ng-click="currentModal.close();" value="Cancel">
    </div>
    </form>
</script>